<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quiz Selection - CineMatch</title>

    <style>

        /* GLOBAL */
        body {
            margin: 0;
            background: #0f172a;
            font-family: system-ui, sans-serif;
            color: #e5e7eb;
            transition: background 0.3s, color 0.3s;
        }

        /* DARK MODE */
        body.dark-mode {
            background: #ffffff;
            color: #0f172a;
        }

        body.dark-mode .header {
            background: rgba(255,255,255,0.7);
            border-bottom-color: rgba(0,0,0,0.25);
        }

        body.dark-mode .quiz-card {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            color: #111827;
        }

        body.dark-mode .quiz-card:hover {
            background: #e5e7eb;
        }

        /* HEADER */
        .header {
            backdrop-filter: blur(14px);
            background: rgba(15, 23, 42, 0.75);
            padding: 24px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(148,163,184,0.2);
            transition: 0.3s;
        }

        .logo {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, #f97316, #ec4899);
            -webkit-background-clip: text;
            color: transparent;
            cursor: pointer;
        }

        .nav-btns {
            display: flex;
            gap: 14px;
        }

        .nav-btn {
            padding: 10px 20px;
            font-size: 15px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            background: linear-gradient(135deg, #f97316, #ec4899);
            color: white;
            font-weight: 600;
            transition: 0.2s;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        .login-btn {
            background: transparent !important;
            border: 2px solid #f97316;
            color: #f97316;
            padding: 10px 22px;
            font-weight: 700;
        }

        .login-btn:hover {
            background: rgba(249,115,22,0.15) !important;
            transform: translateY(-2px);
        }

        /* âœ… COMBINED USER BUTTON (PROFILE + LOGOUT) */
        .user-combo {
            display: flex;
            border-radius: 999px;
            overflow: hidden;
            background: linear-gradient(135deg, #f97316, #ec4899);
            box-shadow: 0 6px 18px rgba(0,0,0,0.4);
        }

        /* ÎšÎ¿Î¹Î½ÏŒ styling ÎºÎ±Î¹ Î³Î¹Î± Ï„Î± 2 */
        .user-combo button {
            border: none;
            padding: 10px 20px;
            font-size: 15px;
            cursor: pointer;
            color: white;
            background: transparent;
            font-weight: 600;
            transition: background 0.2s ease, transform 0.15s ease;
        }

        /* âœ… Î“Î¡Î‘ÎœÎœÎŸÎ¥Î›Î‘ Î‘ÎÎ‘ÎœÎ•Î£Î‘ */
        .user-left {
            border-right: 1px solid rgba(255,255,255,0.4);
        }

        /* âœ… ÎšÎ‘Î›Î¥Î¤Î•Î¡ÎŸ HOVER */
        .user-combo button:hover {
            background: rgba(0,0,0,0.25);
            transform: translateY(-1px);
        }

        /* âœ… Î Î™ÎŸ â€œÎšÎ›Î™Îš-FEELâ€ Î£Î¤ÎŸ LOGOUT */
        .user-right:hover {
            background: rgba(0,0,0,0.35);
        }

        /* QUIZ SELECTION GRID */
        .quiz-container {
            display: flex;
            justify-content: center;
            gap: 60px;
            padding-top: 80px;
        }

        .quiz-card {
            width: 450px;
            height: 360px;
            background: rgba(15, 23, 42, 0.85);
            border-radius: 25px;
            border: 1px solid rgba(148,163,184,0.35);
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 4px 22px rgba(0,0,0,0.45);
            transition: transform 0.25s ease;
            text-align: center;
            color: white;
        }

        .quiz-card:hover {
            transform: scale(1.05);
        }

        .quiz-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: #1e293b;
        }

        .quiz-title {
            padding: 20px;
            font-size: 22px;
            font-weight: 700;
        }

        /* âœ… LAYOUT WITH LEADERBOARD */
        .quiz-layout {
            display: flex;
            justify-content: flex-start;   /* â¬…ï¸ Î±Î½Ï„Î¯ Î³Î¹Î± center */
            gap: 70px;
            padding-top: 80px;
            padding-left: 120px;           /* â¬…ï¸ Ï„Î¿ ÏƒÏ€ÏÏÏ‡Î½ÎµÎ¹ ÏŒÎ»Î¿ Ï€Î¹Î¿ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ */
        }

        /* âœ… LEADERBOARD PANEL */
        .leaderboard-box {
            width: 340px;              /* â¬…ï¸ Ï€Î¹Î¿ Ï†Î±ÏÎ´Ï */
            min-height: 360px;        /* â¬…ï¸ Ï€Î¹Î¿ ÏˆÎ·Î»ÏŒ */
            background: rgba(15, 23, 42, 0.9);
            border-radius: 20px;
            border: 1px solid rgba(148,163,184,0.35);
            padding: 26px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.55);
        }

        body.dark-mode .leaderboard-box {
            background: #f3f4f6;
            border-color: #d1d5db;
        }

        .leaderboard-title {
            font-size: 22px;
            font-weight: 900;
            margin-bottom: 22px;
            text-align: center;
            color: #f97316;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 10px;     /* â¬…ï¸ Ï€Î¹Î¿ ÏˆÎ·Î»Î­Ï‚ Î³ÏÎ±Î¼Î¼Î­Ï‚ */
            border-bottom: 1px solid rgba(148,163,184,0.2);
            font-size: 15px;        /* â¬…ï¸ Î»Î¯Î³Î¿ Ï€Î¹Î¿ Î¼ÎµÎ³Î¬Î»Î¿ */
        }

        body.dark-mode .leaderboard-item {
            border-bottom-color: rgba(0,0,0,0.1);
        }

        .leaderboard-rank {
            font-weight: 800;
            color: #f97316;
        }

        .leaderboard-name {
            flex: 1;
            margin-left: 8px;
        }

        .leaderboard-score {
            font-weight: 700;
        }


    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="logo" onclick="window.location.href='/'">CineMatch</div>

    <div class="nav-btns">

        <button class="nav-btn" onclick="window.location.href='/trending'">Trending</button>
        <button class="nav-btn" onclick="window.location.href='/trending-celebrities'">Trending Actors</button>
        <button class="nav-btn" onclick="window.location.href='/upload'">Upload</button>
        <button class="nav-btn" onclick="window.location.href='/actor-match'">Actor Match</button>
        <button class="nav-btn" onclick="window.location.href='/sentiment'">Sentiment Search</button>
        <button class="nav-btn" onclick="window.location.href='/quiz-selection'">Quiz ğŸ­</button>
        <button class="nav-btn" onclick="toggleDarkMode()">ğ–¤“</button>
        <button class="nav-btn" onclick="location.href='/history'">History</button>

        <!-- ğŸ”¥ NOT LOGGED IN -->
        <th:block th:if="${loggedUser == null}">
            <button class="nav-btn" onclick="window.location.href='/login'">
                LogIn / SignUp
            </button>
        </th:block>

        <!-- âœ… LOGGED IN -->
        <th:block th:if="${loggedUser != null}">
            <div class="user-combo">

                <button class="user-left"
                        onclick="window.location.href='/profile'">
                    <span th:text="${loggedUser.fullName}">User</span>
                </button>

                <button class="user-right"
                        onclick="window.location.href='/logout'">
                    Logout
                </button>

            </div>
        </th:block>

    </div>
</div>


<!-- QUIZ SELECTION -->
<div class="quiz-layout">

    <!-- âœ… LEADERBOARD PANEL -->
    <div class="leaderboard-box">
        <div class="leaderboard-title">ğŸ† Leaderboard</div>
        <div id="leaderboardList"></div>
    </div>

    <!-- âœ… QUIZ SELECTION (YOUR EXISTING CARDS) -->
    <div class="quiz-container">

    <!-- QUIZ 1 -->
    <div class="quiz-card" onclick="window.location.href='/quiz1'">
        <img class="quiz-image" src="/images/general-knowledge.png" alt="">
        <div class="quiz-title">General Knowledge</div>
    </div>

    <!-- QUIZ 2 -->
    <div class="quiz-card" onclick="window.location.href='/quiz2'">
        <img class="quiz-image" src="/images/wich-actor-am-i.jpg" alt="">
        <div class="quiz-title">Guess The Actor</div>
    </div>

</div>


<!-- DARK MODE SCRIPT -->
<script>

    fetch("/api/leaderboard")
        .then(res => res.json())
        .then(data => {

            const list = document.getElementById("leaderboardList");
            list.innerHTML = "";

            data.forEach((user, index) => {

                const row = document.createElement("div");
                row.className = "leaderboard-item";

                row.innerHTML = `
                    <div class="leaderboard-rank">${index + 1}</div>
                    <div class="leaderboard-name">${user.fullName}</div>
                    <div class="leaderboard-score">${user.totalQuizScore}</div>
                `;

                list.appendChild(row);
            });

        })
        .catch(err => {
            console.error("Leaderboard Error:", err);
        });

    function toggleDarkMode() {
        const isDark = document.body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", isDark);
    }

    document.addEventListener("DOMContentLoaded", () => {
        if (localStorage.getItem("darkMode") === "true") {
            document.body.classList.add("dark-mode");
        }
    });



    function toggleDarkMode() {
        const isDark = document.body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", isDark);
    }

    document.addEventListener("DOMContentLoaded", () => {
        if (localStorage.getItem("darkMode") === "true") {
            document.body.classList.add("dark-mode");
        }
    });
</script>

</body>
</html>
